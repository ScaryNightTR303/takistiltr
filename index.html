<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HızlıAlış</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; }
    #hesapPanel, #adminPanel, #urunDetayPanel { 
      transition: transform 0.3s ease; 
      transform: translateX(100%); 
      position: fixed;
      top: 0; right: 0; bottom: 0;
      width: 320px;
      background: white;
      z-index: 1000;
      overflow-y: auto;
      box-shadow: -3px 0 10px rgba(0,0,0,0.1);
    }
    #hesapPanel.active, #adminPanel.active, #urunDetayPanel.active {
      transform: translateX(0);
    }
    .panel-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }
    .panel-header h2 {
      font-weight: 700;
      font-size: 1.25rem;
    }
    .panel-close-btn {
      cursor: pointer;
      font-size: 1.5rem;
      font-weight: 700;
      color: #333;
      background: none;
      border: none;
    }
    main {
      padding: 1rem;
      flex-grow: 1;
      overflow-y: auto;
    }
    .hidden {
      display: none !important;
    }
    .cursor-pointer {
      cursor: pointer;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-blue-900 text-white p-4 flex justify-between items-center sticky top-0 z-50">
  <h1 class="text-2xl font-bold cursor-pointer" onclick="girisKontrolVeUrunYukle()">HızlıAlış</h1>
  <nav class="flex items-center space-x-3">
    <button id="btnGiris" onclick="girisPanelGoster()" class="px-4 py-2 bg-blue-700 rounded hover:bg-blue-600">Giriş Yap</button>
    <button id="btnKayit" onclick="kayitPanelGoster()" class="px-4 py-2 bg-green-700 rounded hover:bg-green-600">Kayıt Ol</button>

    <button id="btnHesap" class="hidden relative" onclick="toggleHesapPanel()">
      <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Hesap" class="w-8 h-8 rounded-full" />
    </button>

    <button id="btnSepet" class="hidden relative" onclick="toggleSepetPanel()">
      <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="Sepet" class="w-8 h-8" />
      <span id="sepetCount" class="absolute -top-1 -right-1 bg-red-600 text-white rounded-full px-1 text-xs font-bold">0</span>
    </button>
  </nav>
</header>

<!-- GİRİŞ PANELİ -->
<section id="girisPanel" class="p-6 max-w-md mx-auto mt-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Giriş Yap</h2>
  <input id="girisKullanici" type="text" placeholder="Kullanıcı Adı" class="border p-2 mb-4 w-full rounded" />
  <input id="girisSifre" type="password" placeholder="Şifre" class="border p-2 mb-4 w-full rounded" />
  <button onclick="girisYap()" class="bg-blue-700 text-white px-4 py-2 rounded w-full">Giriş Yap</button>
  <p class="mt-4 text-center">
    Hesabınız yok mu? 
    <button onclick="kayitPanelGoster()" class="text-green-600 hover:underline font-semibold">Kayıt Ol</button>
  </p>
</section>

<!-- KAYIT PANELİ -->
<section id="kayitPanel" class="p-6 max-w-md mx-auto mt-6 bg-white rounded shadow hidden">
  <h2 class="text-xl font-bold mb-4">Kayıt Ol</h2>
  <input id="kayitKullanici" type="text" placeholder="Kullanıcı Adı" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitSifre" type="password" placeholder="Şifre" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitTel" type="tel" placeholder="Telefon" class="border p-2 mb-3 w-full rounded" />

  <select id="kayitIl" class="border p-2 mb-3 w-full rounded">
    <option value="">İl Seçiniz</option>
  </select>
  <select id="kayitIlce" class="border p-2 mb-3 w-full rounded" disabled>
    <option value="">Önce İl Seçiniz</option>
  </select>
  <input id="kayitAdres" type="text" placeholder="Açık Adres" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitPosta" type="text" placeholder="Posta Kodu" class="border p-2 mb-3 w-full rounded" />
  <button onclick="kayitOl()" class="bg-green-700 text-white px-4 py-2 rounded w-full">Kayıt Ol</button>
  <p class="mt-4 text-center">
    Zaten hesabınız var mı? 
    <button onclick="girisPanelGoster()" class="text-blue-600 hover:underline font-semibold">Giriş Yap</button>
  </p>
</section>

<!-- ANA ÜRÜNLER -->
<main id="urunler" class="p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto hidden">
  <!-- Ürünler JS ile yüklenecek -->
</main>

<!-- HESAP PANELİ -->
<aside id="hesapPanel" class="flex flex-col">
  <div class="panel-header">
    <h2>Hesabım</h2>
    <button class="panel-close-btn" onclick="toggleHesapPanel()">&times;</button>
  </div>
  <div class="p-4 flex-grow overflow-y-auto">
    <p id="hesapHosgeldin" class="font-semibold mb-4"></p>

    <div id="adminPanelBtnWrapper" class="mb-4 hidden">
      <button class="bg-purple-700 text-white px-4 py-2 rounded w-full" onclick="adminPanelGoster()">Admin Panel</button>
    </div>

    <div id="kullaniciSiparisleri">
      <!-- Kullanıcının siparişleri burada listelenecek -->
    </div>

    <button onclick="cikisYap()" class="mt-auto bg-red-600 text-white px-4 py-2 rounded hover:bg-red-500 w-full">Çıkış Yap</button>
  </div>
</aside>

<!-- SEPET PANELİ -->
<aside id="sepetPanel" class="flex flex-col fixed top-0 right-0 bottom-0 w-80 bg-white shadow-lg z-50 p-4 transform translate-x-full transition-transform duration-300 overflow-y-auto">
  <div class="panel-header">
    <h2>Sepetim</h2>
    <button class="panel-close-btn" onclick="toggleSepetPanel()">&times;</button>
  </div>
  <div id="sepetUrunler" class="flex-grow overflow-y-auto">
    <!-- Sepet ürünleri JS ile gelecek -->
  </div>
  <div class="mt-4">
    <p class="font-semibold">Toplam: <span id="sepetToplam">0</span> TL</p>
    <button onclick="siparisiOnayla()" class="bg-green-700 text-white px-4 py-2 rounded w-full mt-2">Siparişi Onayla</button>
  </div>
</aside>

<!-- ÜRÜN DETAY PANELİ -->
<aside id="urunDetayPanel" class="flex flex-col">
  <div class="panel-header">
    <h2 id="detayBaslik"></h2>
    <button class="panel-close-btn" onclick="kapatDetay()">&times;</button>
  </div>
  <div class="p-4 overflow-y-auto flex-grow">
    <img id="detayResim" src="" alt="Ürün Resmi" class="w-full rounded mb-4 object-cover max-h-60" />
    <p id="detayAciklama" class="mb-2"></p>
    <p class="font-semibold text-lg text-green-700 mb-4" id="detayFiyat"></p>
    <p class="text-sm text-gray-500 mb-6" id="detayTarih"></p>
    <button onclick="sepeteEkle()" class="bg-blue-700 text-white px-4 py-2 rounded w-full">Sepete Ekle</button>
  </div>
  <div class="p-4 border-t">
    <h3 class="font-semibold mb-2">Başka ürünlere göz atmak ister misiniz?</h3>
    <div id="digerUrunler" class="grid grid-cols-2 gap-2 max-h-48 overflow-y-auto"></div>
  </div>
</aside>

<!-- ADMIN PANEL -->
<aside id="adminPanel" class="flex flex-col">
  <div class="panel-header">
    <h2>Admin Panel</h2>
    <button class="panel-close-btn" onclick="adminPanelKapat()">&times;</button>
  </div>
  <div class="p-4 overflow-y-auto flex-grow">
    <h3 class="font-semibold mb-4">Kullanıcılar ve Hesaplar</h3>
    <div id="adminKullaniciListesi" class="space-y-3 max-h-96 overflow-y-auto"></div>
  </div>
</aside>

<script>
  // Kullanıcı ve ürün verisi
  let users = {
    admin: { sifre: 'admin1212', admin: true, bakiye: 10000, siparisler: [] }
  };
  let aktifKullanici = null;

  // Ürünler
  const urunler = [];
  for (let i = 1; i <= 12; i++) {
    urunler.push({
      id: i,
      ad: `Ürün ${i}`,
      aciklama: `Bu ürün ${i} açıklamasıdır.`,
      fiyat: 100 + i * 10,
      tarih: '24.06.2025',
      resim: `https://picsum.photos/seed/${i}/400/300`
    });
  }

  // Sepet
  let sepet = [];

  // İl ve ilçe verileri
  const ilceler = {
    'İstanbul': ['Kadıköy', 'Beşiktaş', 'Üsküdar'],
    'Ankara': ['Çankaya', 'Keçiören', 'Sincan'],
    'İzmir': ['Konak', 'Karşıyaka', 'Bornova'],
    'Bursa': ['Osmangazi', 'Nilüfer', 'Yıldırım'],
    'Antalya': ['Muratpaşa', 'Kepez', 'Alanya'],
    // Gerekirse 81 ili ve ilçelerini ekleyebilirim.
  };

  // Sayfa elemanları referansları
  const girisPanel = document.getElementById('girisPanel');
  const kayitPanel = document.getElementById('kayitPanel');
  const btnGiris = document.getElementById('btnGiris');
  const btnKayit = document.getElementById('btnKayit');
  const btnHesap = document.getElementById('btnHesap');
  const hesapPanel = document.getElementById('hesapPanel');
  const urunlerContainer = document.getElementById('urunler');
  const hesapHosgeldin = document.getElementById('hesapHosgeldin');
  const adminPanelBtnWrapper = document.getElementById('adminPanelBtnWrapper');
  const adminPanel = document.getElementById('adminPanel');
  const btnSepet = document.getElementById('btnSepet');
  const sepetPanel = document.getElementById('sepetPanel');
  const sepetUrunler = document.getElementById('sepetUrunler');
  const sepetCount = document.getElementById('sepetCount');
  const sepetToplam = document.getElementById('sepetToplam');
  const kullaniciSiparisleri = document.getElementById('kullaniciSiparisleri');
  const urunDetayPanel = document.getElementById('urunDetayPanel');
  const detayBaslik = document.getElementById('detayBaslik');
  const detayResim = document.getElementById('detayResim');
  const detayAciklama = document.getElementById('detayAciklama');
  const detayFiyat = document.getElementById('detayFiyat');
  const detayTarih = document.getElementById('detayTarih');
  const digerUrunler = document.getElementById('digerUrunler');

  // İl ve ilçe dropdownlarını doldur
  function ilDropdownDoldur() {
    const ilSelect = document.getElementById('kayitIl');
    ilSelect.innerHTML = '<option value="">İl Seçiniz</option>';
    Object.keys(ilceler).forEach(il => {
      const option = document.createElement('option');
      option.value = il;
      option.textContent = il;
      ilSelect.appendChild(option);
    });
  }
  ilDropdownDoldur();

  document.getElementById('kayitIl').addEventListener('change', function() {
    const il = this.value;
    const ilceSelect = document.getElementById('kayitIlce');
    ilceSelect.innerHTML = '';
    if (il && ilceler[il]) {
      ilceler[il].forEach(ilce => {
        const option = document.createElement('option');
        option.value = ilce;
        option.textContent = ilce;
        ilceSelect.appendChild(option);
      });
      ilceSelect.disabled = false;
    } else {
      ilceSelect.innerHTML = '<option>Önce İl Seçiniz</option>';
      ilceSelect.disabled = true;
    }
  });

  // Panel aç/kapa fonksiyonları
  function girisPanelGoster() {
    girisPanel.classList.remove('hidden');
    kayitPanel.classList.add('hidden');
  }
  function kayitPanelGoster() {
    kayitPanel.classList.remove('hidden');
    girisPanel.classList.add('hidden');
  }
  function toggleHesapPanel() {
    hesapPanel.classList.toggle('active');
  }
  function adminPanelGoster() {
    adminPanel.classList.add('active');
    hesapPanel.classList.remove('active');
    adminKullaniciListele();
  }
  function adminPanelKapat() {
    adminPanel.classList.remove('active');
  }
  function toggleSepetPanel() {
    sepetPanel.classList.toggle('translate-x-full');
  }
  function urunDetayGoster(urun) {
    urunDetayPanel.classList.add('active');
    detayBaslik.textContent = urun.ad;
    detayResim.src = urun.resim;
    detayAciklama.textContent = urun.aciklama;
    detayFiyat.textContent = `${urun.fiyat} TL`;
    detayTarih.textContent = `Yüklenme Tarihi: ${urun.tarih}`;
    // Başka ürünler kısmı
    digerUrunler.innerHTML = '';
    urunler.filter(u => u.id !== urun.id).slice(0,4).forEach(u => {
      const div = document.createElement('div');
      div.className = 'cursor-pointer border rounded overflow-hidden';
      div.style.height = '90px';
      div.onclick = () => {
        urunDetayGoster(u);
      };
      div.innerHTML = `
        <img src="${u.resim}" alt="${u.ad}" class="w-full h-full object-cover" />
      `;
      digerUrunler.appendChild(div);
    });
    aktifUrun = urun;
  }
  function kapatDetay() {
    urunDetayPanel.classList.remove('active');
  }

  // Ürünleri yükle
  function urunleriYukle() {
    urunlerContainer.innerHTML = '';
    urunler.forEach(u => {
      const div = document.createElement('div');
      div.className = 'bg-white rounded shadow cursor-pointer hover:shadow-lg overflow-hidden flex flex-col';
      div.onclick = () => urunDetayGoster(u);
      div.innerHTML = `
        <img src="${u.resim}" alt="${u.ad}" class="w-full h-48 object-cover" />
        <div class="p-4 flex-grow flex flex-col">
          <h3 class="font-semibold text-lg">${u.ad}</h3>
          <p class="text-gray-600 text-sm flex-grow">${u.aciklama}</p>
          <p class="text-green-700 font-bold mt-2">${u.fiyat} TL</p>
        </div>
      `;
      urunlerContainer.appendChild(div);
    });
  }

  // Giriş yap
  function girisYap() {
    const k = document.getElementById('girisKullanici').value.trim();
    const s = document.getElementById('girisSifre').value;
    if (users[k] && users[k].sifre === s) {
      aktifKullanici = k;
      btnGiris.classList.add('hidden');
      btnKayit.classList.add('hidden');
      btnHesap.classList.remove('hidden');
      btnSepet.classList.remove('hidden');
      girisPanel.classList.add('hidden');
      kayitPanel.classList.add('hidden');
      urunlerContainer.classList.remove('hidden');
      hesapHosgeldin.textContent = `${aktifKullanici} hoş geldiniz!`;
      toggleHesapPanel();
      if (users[aktifKullanici].admin) adminPanelBtnWrapper.classList.remove('hidden');
      urunleriYukle();
      sepet = [];
      sepetGuncelle();
      kullaniciSiparisleriListele();
    } else {
      alert('Hatalı kullanıcı adı veya şifre.');
    }
  }

  // Kayıt ol
  function kayitOl() {
    const k = document.getElementById('kayitKullanici').value.trim();
    const s = document.getElementById('kayitSifre').value;
    const tel = document.getElementById('kayitTel').value.trim();
    const il = document.getElementById('kayitIl').value;
    const ilce = document.getElementById('kayitIlce').value;
    const adres = document.getElementById('kayitAdres').value.trim();
    const posta = document.getElementById('kayitPosta').value.trim();
    if (!k || !s || !tel || !il || !ilce || !adres || !posta) {
      alert('Lütfen tüm alanları doldurun.');
      return;
    }
    if (users[k]) {
      alert('Kullanıcı adı zaten kayıtlı.');
      return;
    }
    users[k] = {
      sifre: s,
      admin: false,
      telefon: tel,
      il,
      ilce,
      adres,
      posta,
      bakiye: 0,
      siparisler: []
    };
    alert('Kayıt başarılı! Giriş yapabilirsiniz.');
    kayitPanel.classList.add('hidden');
    girisPanel.classList.remove('hidden');
  }

  // Çıkış yap
  function cikisYap() {
    aktifKullanici = null;
    btnGiris.classList.remove('hidden');
    btnKayit.classList.remove('hidden');
    btnHesap.classList.add('hidden');
    btnSepet.classList.add('hidden');
    urunlerContainer.classList.add('hidden');
    hesapPanel.classList.remove('active');
    adminPanel.classList.remove('active');
    sepetPanel.classList.remove('active');
    sepet = [];
    sepetGuncelle();
    kullaniciSiparisleri.innerHTML = '';
  }

  // Admin panelde kullanıcıları listele
  function adminKullaniciListele() {
    const liste = document.getElementById('adminKullaniciListesi');
    liste.innerHTML = '';
    Object.keys(users).forEach(k => {
      const u = users[k];
      const div = document.createElement('div');
      div.className = 'border p-3 rounded bg-gray-50';
      div.innerHTML = `
        <strong>${k}</strong> ${u.admin ? '(Admin)' : ''}
        <p>Bakiye: ${u.bakiye} TL</p>
        <p>Telefon: ${u.telefon || '-'}</p>
        <p>Adres: ${u.il || '-'} / ${u.ilce || '-'} / ${u.adres || '-'}</p>
        <div class="mt-2 space-x-2">
          <button onclick="bakiyeArtir('${k}')" class="px-2 py-1 bg-green-600 text-white rounded hover:bg-green-500">Bakiye Arttır</button>
          <button onclick="bakiyeAzalt('${k}')" class="px-2 py-1 bg-red-600 text-white rounded hover:bg-red-500">Bakiye Azalt</button>
        </div>
      `;
      liste.appendChild(div);
    });
  }
  function bakiyeArtir(kullanici) {
    let miktar = prompt("Kaç TL eklemek istiyorsunuz?");
    miktar = Number(miktar);
    if (isNaN(miktar) || miktar <= 0) return alert("Geçersiz miktar.");
    users[kullanici].bakiye += miktar;
    adminKullaniciListele();
    if (aktifKullanici === kullanici) hesapHosgeldin.textContent = `${aktifKullanici} hoş geldiniz! (Bakiye: ${users[aktifKullanici].bakiye} TL)`;
  }
  function bakiyeAzalt(kullanici) {
    let miktar = prompt("Kaç TL azaltmak istiyorsunuz?");
    miktar = Number(miktar);
    if (isNaN(miktar) || miktar <= 0) return alert("Geçersiz miktar.");
    if (users[kullanici].bakiye < miktar) return alert("Yetersiz bakiye.");
    users[kullanici].bakiye -= miktar;
    adminKullaniciListele();
    if (aktifKullanici === kullanici) hesapHosgeldin.textContent = `${aktifKullanici} hoş geldiniz! (Bakiye: ${users[aktifKullanici].bakiye} TL)`;
  }

  // Sepete ekle
  let aktifUrun = null;
  function sepeteEkle() {
    if (!aktifUrun) return;
    let mevcut = sepet.find(i => i.urun.id === aktifUrun.id);
    if (mevcut) {
      mevcut.adet++;
    } else {
      sepet.push({ urun: aktifUrun, adet: 1 });
    }
    sepetGuncelle();
    alert('Ürün sepete eklendi!');
  }

  // Sepet panel aç/kapa
  function toggleSepetPanel() {
    sepetPanel.classList.toggle('active');
  }

  // Sepeti güncelle
  function sepetGuncelle() {
    sepetUrunler.innerHTML = '';
    let toplam = 0;
    sepet.forEach((item, index) => {
      toplam += item.urun.fiyat * item.adet;
      const div = document.createElement('div');
      div.className = 'flex justify-between items-center border-b py-2';
      div.innerHTML = `
        <div>
          <p class="font-semibold">${item.urun.ad}</p>
          <p>Adet: ${item.adet}</p>
          <p>Fiyat: ${item.urun.fiyat} TL</p>
        </div>
        <div>
          <button onclick="urunSepettenCikar(${index})" class="text-red-600 font-bold hover:text-red-800">&times;</button>
        </div>
      `;
      sepetUrunler.appendChild(div);
    });
    sepetToplam.textContent = toplam.toFixed(2);
    sepetCount.textContent = sepet.length;
  }

  // Sepetten ürün çıkar
  function urunSepettenCikar(index) {
    if (index < 0 || index >= sepet.length) return;
    sepet.splice(index, 1);
    sepetGuncelle();
  }

  // Siparişi onayla
  function siparisiOnayla() {
    if (sepet.length === 0) {
      alert('Sepetiniz boş!');
      return;
    }
    if (!aktifKullanici) {
      alert('Lütfen giriş yapınız!');
      return;
    }
    const toplam = sepet.reduce((acc, item) => acc + item.urun.fiyat * item.adet, 0);
    if (users[aktifKullanici].bakiye < toplam) {
      alert('Yetersiz bakiye!');
      return;
    }
    users[aktifKullanici].bakiye -= toplam;
    const siparis = {
      id: Date.now(),
      urunler: [...sepet],
      toplam,
      tarih: new Date().toLocaleString()
    };
    users[aktifKullanici].siparisler.push(siparis);
    alert('Siparişiniz onaylandı! Teşekkürler.');
    sepet = [];
    sepetGuncelle();
    kullaniciSiparisleriListele();
    hesapPanel.classList.remove('active');
    sepetPanel.classList.remove('active');
  }

  // Kullanıcının siparişlerini listele
  function kullaniciSiparisleriListele() {
    if (!aktifKullanici) return;
    const container = kullaniciSiparisleri;
    container.innerHTML = '';
    const siparisler = users[aktifKullanici].siparisler || [];
    if (siparisler.length === 0) {
      container.innerHTML = '<p>Henüz siparişiniz yok.</p>';
      return;
    }
    siparisler.forEach(sip => {
      const div = document.createElement('div');
      div.className = 'border p-3 rounded mb-2 bg-gray-50';
      div.innerHTML = `
        <p><strong>Sipariş ID:</strong> ${sip.id}</p>
        <p><strong>Tarih:</strong> ${sip.tarih}</p>
        <p><strong>Toplam:</strong> ${sip.toplam.toFixed(2)} TL</p>
        <p><strong>Ürünler:</strong></p>
        <ul class="list-disc list-inside">
          ${sip.urunler.map(i => `<li>${i.urun.ad} x${i.adet} (${i.urun.fiyat} TL)</li>`).join('')}
        </ul>
      `;
      container.appendChild(div);
    });
  }

  // Site açılışında login durumuna göre düzenle
  function girisKontrolVeUrunYukle() {
    if (aktifKullanici) {
      btnGiris.classList.add('hidden');
      btnKayit.classList.add('hidden');
      btnHesap.classList.remove('hidden');
      btnSepet.classList.remove('hidden');
      urunlerContainer.classList.remove('hidden');
      hesapHosgeldin.textContent = `${aktifKullanici} hoş geldiniz!`;
      if (users[aktifKullanici].admin) adminPanelBtnWrapper.classList.remove('hidden');
      urunleriYukle();
      kullaniciSiparisleriListele();
      sepetGuncelle();
    } else {
      btnGiris.classList.remove('hidden');
      btnKayit.classList.remove('hidden');
      btnHesap.classList.add('hidden');
      btnSepet.classList.add('hidden');
      urunlerContainer.classList.add('hidden');
      girisPanel.classList.remove('hidden');
      kayitPanel.classList.add('hidden');
    }
  }

  // Sayfa açılırken çağır
  window.onload = () => {
    girisKontrolVeUrunYukle();
  };
</script>

</body>
</html>
