<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MottoTrend Klon - Shopier</title>
<style>
  /* Reset */
  * {
    box-sizing: border-box;
    margin: 0; padding: 0;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #fff;
    color: #222;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  a {
    text-decoration: none;
    color: inherit;
  }
  header {
    background: #003366;
    color: white;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  header .logo {
    font-weight: 900;
    font-size: 1.8rem;
    letter-spacing: 2px;
  }
  nav {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  nav button {
    background: #007bff;
    border: none;
    color: white;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s ease;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  nav button:hover {
    background: #0056b3;
  }
  nav button svg {
    width: 18px;
    height: 18px;
  }
  main {
    flex-grow: 1;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
  }
  /* ÃœrÃ¼nler yatay grid, responsive */
  .products {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: flex-start;
  }
  .product-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    background: #fefefe;
    flex: 0 1 220px; /* Esnek geniÅŸlik 220px, taÅŸarsa alt satÄ±ra geÃ§ */
    display: flex;
    flex-direction: column;
    transition: box-shadow 0.3s ease;
  }
  .product-card:hover {
    box-shadow: 0 0 12px rgba(0,0,0,0.2);
  }
  .product-card img {
    width: 100%;
    height: 180px;
    object-fit: contain;
    background: #fff;
  }
  .product-info {
    padding: 12px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .product-title {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 6px;
    flex-grow: 1;
  }
  .product-price {
    color: #e60023;
    font-weight: 700;
    margin-bottom: 12px;
    font-size: 1.1rem;
  }
  .add-cart-btn {
    background: #e60023;
    border: none;
    color: white;
    padding: 10px 0;
    border-radius: 4px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  .add-cart-btn:hover {
    background: #b00018;
  }
  /* Modal */
  .modal-bg {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    padding: 15px;
  }
  .modal-bg.active {
    display: flex;
  }
  .modal {
    background: white;
    border-radius: 10px;
    max-width: 550px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 20px;
    position: relative;
  }
  .modal h2 {
    margin-bottom: 15px;
  }
  .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    background: transparent;
    border: none;
    font-size: 22px;
    cursor: pointer;
    color: #666;
  }
  /* Cart Items */
  .cart-items {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 15px;
  }
  .cart-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    border-bottom: 1px solid #eee;
    padding-bottom: 8px;
  }
  .cart-item img {
    width: 60px;
    height: 60px;
    object-fit: contain;
    margin-right: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
  }
  .cart-item-info {
    flex-grow: 1;
  }
  .cart-item-title {
    font-weight: 700;
    margin-bottom: 4px;
  }
  .cart-item-qty {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  .qty-btn {
    background: #007bff;
    border: none;
    color: white;
    width: 24px;
    height: 24px;
    font-weight: 700;
    border-radius: 4px;
    cursor: pointer;
    user-select: none;
  }
  .qty-num {
    min-width: 20px;
    text-align: center;
  }
  .remove-btn {
    background: transparent;
    border: none;
    color: #e60023;
    font-weight: 700;
    cursor: pointer;
    margin-left: 10px;
    font-size: 20px;
    line-height: 1;
  }
  /* Form */
  form label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
  }
  form input, form select, form textarea {
    width: 100%;
    padding: 8px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
  }
  form textarea {
    resize: vertical;
    min-height: 60px;
  }
  form button.submit-btn {
    background: #28a745;
    border: none;
    color: white;
    padding: 10px 0;
    font-weight: 700;
    border-radius: 6px;
    cursor: pointer;
    width: 100%;
  }
  form button.submit-btn:hover {
    background: #218838;
  }
  /* Footer */
  footer {
    background: #003366;
    color: white;
    padding: 20px;
    margin-top: auto;
  }
  footer .footer-content {
    max-width: 1200px;
    margin: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 20px;
  }
  footer .contact-info {
    flex: 1 1 300px;
  }
  footer .admin-login {
    flex: 1 1 300px;
  }
  footer .admin-login button {
    background: #007bff;
    border: none;
    padding: 10px 15px;
    font-weight: 700;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  }
  footer .admin-login button:hover {
    background: #0056b3;
  }
  /* Login Modal */
  #loginForm input {
    margin-bottom: 12px;
  }
  /* Admin Panel */
  #adminPanel {
    max-width: 900px;
    margin: auto;
  }
  #adminPanel h3 {
    margin-bottom: 15px;
    text-align: center;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 8px 12px;
    text-align: left;
    vertical-align: top;
  }
  th {
    background: #003366;
    color: white;
  }
  select.status-select {
    padding: 5px;
    border-radius: 4px;
  }
  /* Responsive */
  @media (max-width: 600px) {
    nav {
      gap: 8px;
    }
    .product-card img {
      height: 140px;
    }
  }
</style>
</head>
<body>

<header>
  <div class="logo">MottoTrend</div>
  <nav>
    <button id="cartBtn" aria-label="Sepet">
      ðŸ›’ Sepet <span id="cartCount">(0)</span>
    </button>
    <button id="orderTrackBtn" aria-label="SipariÅŸ Takip">
      ðŸ“¦ SipariÅŸ Takip
    </button>
  </nav>
</header>

<main>
  <section class="products" id="productsContainer">
    <!-- ÃœrÃ¼n kartlarÄ± buraya gelecek -->
  </section>
</main>

<!-- Sepet Modal -->
<div class="modal-bg" id="cartModal" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
  <div class="modal">
    <button class="close-btn" id="closeCart">&times;</button>
    <h2 id="cartTitle">Sepetiniz</h2>
    <div class="cart-items" id="cartItems"></div>
    <form id="orderForm">
      <h3>SipariÅŸ Bilgileri</h3>
      <label for="firstName">Ä°sim</label>
      <input type="text" id="firstName" name="firstName" required placeholder="Ä°sim" />
      <label for="lastName">Soyisim</label>
      <input type="text" id="lastName" name="lastName" required placeholder="Soyisim" />
      <label for="phone">Telefon (+90 ile baÅŸlayacak)</label>
      <input type="tel" id="phone" name="phone" pattern="^\+90\d{10}$" required placeholder="+90xxxxxxxxxx" />
      <label for="note">Not (Ä°steÄŸe baÄŸlÄ±)</label>
      <textarea id="note" name="note" placeholder="SipariÅŸle ilgili notunuz..."></textarea>
      <label for="address">Adresiniz</label>
      <textarea id="address" name="address" required placeholder="Adresinizi giriniz"></textarea>
      <label for="bankInfo">Banka / Kart Bilgisi</label>
      <input type="text" id="bankInfo" name="bankInfo" required placeholder="Kart bilgisi" />
      <button type="submit" class="submit-btn">SipariÅŸi Onayla</button>
    </form>
  </div>
</div>

<!-- SipariÅŸ Takip Modal -->
<div class="modal-bg" id="orderTrackModal" role="dialog" aria-modal="true" aria-labelledby="orderTrackTitle">
  <div class="modal">
    <button class="close-btn" id="closeOrderTrack">&times;</button>
    <h2 id="orderTrackTitle">SipariÅŸ Takip</h2>
    <div id="orderTrackContent">
      <!-- SipariÅŸ durumu gÃ¶sterilecek -->
    </div>
  </div>
</div>

<!-- Admin GiriÅŸ ve Panel Footerâ€™da -->

<footer>
  <div class="footer-content">
    <div class="contact-info">
      <h3>Ä°letiÅŸim</h3>
      <p>E-posta: destek@mottotrend.com</p>
      <p>Telefon: +90 555 123 4567</p>
      <p>Adres: Ä°stanbul, TÃ¼rkiye</p>
    </div>
    <div class="admin-login">
      <button id="adminLoginBtn">Admin GiriÅŸi</button>
    </div>
  </div>
</footer>

<!-- Admin Login Modal -->
<div class="modal-bg" id="adminLoginModal" role="dialog" aria-modal="true" aria-labelledby="adminLoginTitle">
  <div class="modal">
    <button class="close-btn" id="closeAdminLogin">&times;</button>
    <h2 id="adminLoginTitle">Admin GiriÅŸi</h2>
    <form id="adminLoginForm">
      <label for="adminUser">KullanÄ±cÄ± AdÄ±</label>
      <input type="text" id="adminUser" name="adminUser" required autocomplete="username" />
      <label for="adminPass">Åžifre</label>
      <input type="password" id="adminPass" name="adminPass" required autocomplete="current-password" />
      <button type="submit" class="submit-btn">GiriÅŸ Yap</button>
    </form>
  </div>
</div>

<!-- Admin Panel Modal -->
<div class="modal-bg" id="adminPanelModal" role="dialog" aria-modal="true" aria-labelledby="adminPanelTitle">
  <div class="modal" style="max-width: 95vw; max-height: 95vh; overflow-y: auto;">
    <button class="close-btn" id="closeAdminPanel">&times;</button>
    <h2 id="adminPanelTitle">Admin Paneli</h2>
    <div id="adminPanel">
      <!-- KullanÄ±cÄ±lar, sipariÅŸler ve durumlarÄ± burada listelenecek -->
    </div>
  </div>
</div>

<script>
(() => {
  // Sabitler
  const ADMIN_USER = "admin";
  const ADMIN_PASS = "admin";
  const CART_KEY = "mottotrend_cart";
  const ORDERS_KEY = "mottotrend_orders";
  const USERS_KEY = "mottotrend_users";

  // ÃœrÃ¼n verisi: 20 adet, Googleâ€™dan seÃ§ilmiÅŸ kaliteli gÃ¶rsellerle, fiyatlar rastgele 49-499 arasÄ±
  const products = [
    {id:1, title:"Erkek Beyaz Sneaker", price:199.90, img:"https://i.ibb.co/WnxY4g1/white-sneaker.jpg"},
    {id:2, title:"KadÄ±n Siyah Deri Ã‡anta", price:349.90, img:"https://i.ibb.co/QYvBzxy/black-leather-bag.jpg"},
    {id:3, title:"Unisex Spor Saat", price:299.90, img:"https://i.ibb.co/KXnWJ1M/sports-watch.jpg"},
    {id:4, title:"Kahverengi Deri CÃ¼zdan", price:89.90, img:"https://i.ibb.co/GC0TJwY/leather-wallet.jpg"},
    {id:5, title:"Mavi Kot Pantolon", price:159.90, img:"https://i.ibb.co/F7xj6Md/blue-jeans.jpg"},
    {id:6, title:"Siyah Basic TiÅŸÃ¶rt", price:69.90, img:"https://i.ibb.co/7QtGq1r/black-tee.jpg"},
    {id:7, title:"GÃ¼neÅŸ GÃ¶zlÃ¼ÄŸÃ¼ Retro", price:139.90, img:"https://i.ibb.co/r7WNX76/retro-sunglasses.jpg"},
    {id:8, title:"KadÄ±n KÄ±rmÄ±zÄ± Elbise", price:399.90, img:"https://i.ibb.co/f2FC5ST/red-dress.jpg"},
    {id:9, title:"Erkek Spor AyakkabÄ±", price:249.90, img:"https://i.ibb.co/xJbBR5v/sports-shoes.jpg"},
    {id:10, title:"KadÄ±n Beyaz Bluz", price:179.90, img:"https://i.ibb.co/vZcRrVW/white-blouse.jpg"},
    {id:11, title:"Siyah Deri Bot", price:379.90, img:"https://i.ibb.co/8BTtLTY/black-leather-boot.jpg"},
    {id:12, title:"Mavi Spor Mont", price:299.90, img:"https://i.ibb.co/M9c3c2f/sport-jacket.jpg"},
    {id:13, title:"Erkek Kot Ceket", price:219.90, img:"https://i.ibb.co/Hhq08dq/denim-jacket.jpg"},
    {id:14, title:"KadÄ±n Spor Tayt", price:99.90, img:"https://i.ibb.co/fYjJZx6/sport-leggings.jpg"},
    {id:15, title:"Erkek Siyah Kemer", price:89.90, img:"https://i.ibb.co/FxJHpCt/black-belt.jpg"},
    {id:16, title:"KadÄ±n Bej Triko", price:129.90, img:"https://i.ibb.co/9rFxYqP/beige-knitwear.jpg"},
    {id:17, title:"Erkek Beyaz GÃ¶mlek", price:149.90, img:"https://i.ibb.co/R0kGKHy/white-shirt.jpg"},
    {id:18, title:"KadÄ±n Siyah Åžapka", price:59.90, img:"https://i.ibb.co/LP9by1S/black-hat.jpg"},
    {id:19, title:"Erkek Spor Åžapka", price:49.90, img:"https://i.ibb.co/wKg8HWx/sport-cap.jpg"},
    {id:20, title:"KadÄ±n KÄ±rmÄ±zÄ± Ã‡anta", price:219.90, img:"https://i.ibb.co/t2hJ8hq/red-bag.jpg"},
  ];

  // Veriler localStorage'dan yÃ¼kleniyor
  let cart = JSON.parse(localStorage.getItem(CART_KEY)) || [];
  let orders = JSON.parse(localStorage.getItem(ORDERS_KEY)) || [];
  let users = JSON.parse(localStorage.getItem(USERS_KEY)) || [];

  // Admin login durumu
  let adminLoggedIn = false;

  // Elementler
  const productsContainer = document.getElementById("productsContainer");
  const cartBtn = document.getElementById("cartBtn");
  const orderTrackBtn = document.getElementById("orderTrackBtn");
  const cartModal = document.getElementById("cartModal");
  const orderTrackModal = document.getElementById("orderTrackModal");
  const adminLoginBtn = document.getElementById("adminLoginBtn");
  const adminLoginModal = document.getElementById("adminLoginModal");
  const adminPanelModal = document.getElementById("adminPanelModal");

  const cartCountSpan = document.getElementById("cartCount");
  const cartItemsContainer = document.getElementById("cartItems");
  const orderForm = document.getElementById("orderForm");
  const orderTrackContent = document.getElementById("orderTrackContent");
  const adminPanelDiv = document.getElementById("adminPanel");

  // Sepet sayÄ±sÄ±nÄ± gÃ¼ncelle
  function updateCartCount() {
    let count = cart.reduce((acc, item) => acc + item.qty, 0);
    cartCountSpan.textContent = (${count});
  }

  // ÃœrÃ¼nleri gÃ¶ster
  function showProducts() {
    productsContainer.innerHTML = "";
    products.forEach(p => {
      const card = document.createElement("article");
      card.className = "product-card";
      card.innerHTML = 
        <img src="${p.img}" alt="${p.title}" loading="lazy" />
        <div class="product-info">
          <div class="product-title">${p.title}</div>
          <div class="product-price">${p.price.toFixed(2)}â‚º</div>
          <button class="add-cart-btn" data-id="${p.id}" aria-label="${p.title} sepete ekle">Sepete Ekle</button>
        </div>
      ;
      productsContainer.appendChild(card);
    });
  }

  // Sepeti renderla
  function renderCart() {
    if(cart.length === 0) {
      cartItemsContainer.innerHTML = "<p>Sepetiniz boÅŸ.</p>";
      orderForm.style.display = "none";
      return;
    }
    orderForm.style.display = "block";
    cartItemsContainer.innerHTML = "";
    cart.forEach(item => {
      const p = products.find(pr => pr.id === item.id);
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = 
        <img src="${p.img}" alt="${p.title}" />
        <div class="cart-item-info">
          <div class="cart-item-title">${p.title}</div>
          <div class="cart-item-qty" aria-label="Adet kontrolÃ¼">
            <button class="qty-btn" data-id="${item.id}" data-action="dec" aria-label="Azalt">-</button>
            <span class="qty-num">${item.qty}</span>
            <button class="qty-btn" data-id="${item.id}" data-action="inc" aria-label="ArttÄ±r">+</button>
          </div>
        </div>
        <button class="remove-btn" data-id="${item.id}" aria-label="ÃœrÃ¼nÃ¼ kaldÄ±r">&times;</button>
      ;
      cartItemsContainer.appendChild(div);
    });
  }

  // Sepete ekle
  function addToCart(id) {
    const found = cart.find(i => i.id === id);
    if(found) found.qty++;
    else cart.push({id:id, qty:1});
    saveCart();
    updateCartCount();
  }

  // Sepette deÄŸiÅŸiklik
  function updateCartItem(id, action) {
    const found = cart.find(i => i.id === id);
    if(!found) return;
    if(action === "inc") found.qty++;
    else if(action === "dec") {
      found.qty--;
      if(found.qty <= 0) {
        cart = cart.filter(i => i.id !== id);
      }
    }
    saveCart();
  }
  function removeCartItem(id) {
    cart = cart.filter(i => i.id !== id);
    saveCart();
  }

  // Kaydet
  function saveCart() {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
  }
  function saveOrders() {
    localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
  }
  function saveUsers() {
    localStorage.setItem(USERS_KEY, JSON.stringify(users));
  }

  // Sepet modal aÃ§/kapa
  cartBtn.addEventListener("click", () => {
    renderCart();
    cartModal.classList.add("active");
  });
  document.getElementById("closeCart").addEventListener("click", () => {
    cartModal.classList.remove("active");
  });

  // Sepette buton iÅŸlemleri
  cartItemsContainer.addEventListener("click", (e) => {
    if(e.target.classList.contains("qty-btn")) {
      const id = Number(e.target.dataset.id);
      const action = e.target.dataset.action;
      updateCartItem(id, action);
      renderCart();
      updateCartCount();
    }
    else if(e.target.classList.contains("remove-btn")) {
      const id = Number(e.target.dataset.id);
      removeCartItem(id);
      renderCart();
      updateCartCount();
    }
  });

  // SipariÅŸ formu gÃ¶nderme
  orderForm.addEventListener("submit", e => {
    e.preventDefault();
    if(cart.length === 0) {
      alert("Sepetiniz boÅŸ!");
      return;
    }
    const firstName = orderForm.firstName.value.trim();
    const lastName = orderForm.lastName.value.trim();
    const phone = orderForm.phone.value.trim();
    const note = orderForm.note.value.trim();
    const address = orderForm.address.value.trim();
    const bankInfo = orderForm.bankInfo.value.trim();

    if(!firstName || !lastName || !phone || !address || !bankInfo) {
      alert("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.");
      return;
    }
    if(!/^\+90\d{10}$/.test(phone)) {
      alert("Telefon numarasÄ± +90 ile baÅŸlamalÄ± ve toplam 13 karakter olmalÄ±dÄ±r.");
      return;
    }

    // KullanÄ±cÄ± ve sipariÅŸ kaydÄ±
    const now = new Date().toISOString();
    const userId = Date.now();

    users.push({
      id: userId,
      firstName,
      lastName,
      phone,
      note,
      address,
      bankInfo,
      created: now
    });
    saveUsers();

    orders.push({
      userId,
      date: now,
      products: [...cart],
      status: "SipariÅŸ alÄ±ndÄ±"
    });
    saveOrders();

    alert("SipariÅŸiniz baÅŸarÄ±yla alÄ±ndÄ±! SipariÅŸ takip butonundan kontrol edebilirsiniz.");

    // Sepeti temizle
    cart = [];
    saveCart();
    updateCartCount();
    cartModal.classList.remove("active");
  });

  // SipariÅŸ Takip modal aÃ§/kapa
  orderTrackBtn.addEventListener("click", () => {
    renderOrderTrack();
    orderTrackModal.classList.add("active");
  });
  document.getElementById("closeOrderTrack").addEventListener("click", () => {
    orderTrackModal.classList.remove("active");
  });

  // SipariÅŸ Takip gÃ¶sterimi
  function renderOrderTrack() {
    orderTrackContent.innerHTML = "";
    if(orders.length === 0) {
      orderTrackContent.innerHTML = <p>HenÃ¼z sipariÅŸiniz bulunmamaktadÄ±r. <a href="#" onclick="closeOrderTrackAndOpenCart(event)">AlÄ±ÅŸveriÅŸe baÅŸlayÄ±n!</a></p>;
      return;
    }
    // En son sipariÅŸi gÃ¶ster
    const lastOrder = orders[orders.length - 1];
    // KullanÄ±cÄ± bilgisi
    const user = users.find(u => u.id === lastOrder.userId);

    if(!user) {
      orderTrackContent.innerHTML = <p>SipariÅŸ bilgisi bulunamadÄ±.</p>;
      return;
    }

    let html = <p><strong>SipariÅŸ Tarihi:</strong> ${new Date(lastOrder.date).toLocaleString()}</p>;
    html += <ul>;
    lastOrder.products.forEach(item => {
      const p = products.find(pr => pr.id === item.id);
      html += <li>${p.title} x${item.qty}</li>;
    });
    html += </ul>;
    html += <p><strong>Ä°sim Soyisim:</strong> ${user.firstName} ${user.lastName}</p>;
    html += <p><strong>Telefon:</strong> ${user.phone}</p>;
    html += <p><strong>Not:</strong> ${user.note || "-"}</p>;
    html += <p><strong>Adres:</strong> ${user.address}</p>;
    html += <p><strong>Kargo Durumu:</strong> <em>${lastOrder.status}</em></p>;

    orderTrackContent.innerHTML = html;
  }

  // AlÄ±ÅŸveriÅŸe yÃ¶nlendirme linki iÅŸlevi
  window.closeOrderTrackAndOpenCart = function(event) {
    event.preventDefault();
    orderTrackModal.classList.remove("active");
    cartModal.classList.add("active");
  }

  // Admin GiriÅŸ modal aÃ§/kapa
  adminLoginBtn.addEventListener("click", () => {
    adminLoginModal.classList.add("active");
  });
  document.getElementById("closeAdminLogin").addEventListener("click", () => {
    adminLoginModal.classList.remove("active");
  });

  // Admin login formu
  const adminLoginForm = document.getElementById("adminLoginForm");
  adminLoginForm.addEventListener("submit", e => {
    e.preventDefault();
    const user = adminLoginForm.adminUser.value.trim();
    const pass = adminLoginForm.adminPass.value.trim();
    if(user === ADMIN_USER && pass === ADMIN_PASS) {
      adminLoggedIn = true;
      alert("Admin giriÅŸi baÅŸarÄ±lÄ±.");
      adminLoginModal.classList.remove("active");
      showAdminPanel();
    } else {
      alert("HatalÄ± kullanÄ±cÄ± adÄ± veya ÅŸifre.");
    }
  });

  // Admin Panel modal aÃ§/kapa
  function showAdminPanel() {
    if(!adminLoggedIn) {
      alert("LÃ¼tfen Ã¶nce admin giriÅŸi yapÄ±n.");
      return;
    }
    adminPanelModal.classList.add("active");
    renderAdminPanel();
  }
  document.getElementById("closeAdminPanel").addEventListener("click", () => {
    adminPanelModal.classList.remove("active");
  });

  // Admin Panel iÃ§eriÄŸi render
  function renderAdminPanel() {
    if(users.length === 0) {
      adminPanelDiv.innerHTML = "<p>HenÃ¼z kullanÄ±cÄ± veya sipariÅŸ bulunmamaktadÄ±r.</p>";
      return;
    }
    let html = <h3>KullanÄ±cÄ±lar ve SipariÅŸleri</h3>;
    html += <table><thead>
      <tr>
        <th>KullanÄ±cÄ± ID</th>
        <th>Ä°sim Soyisim</th>
        <th>Telefon</th>
        <th>Not</th>
        <th>Adres</th>
        <th>IBAN / Kart</th>
        <th>KayÄ±t Tarihi</th>
        <th>SipariÅŸler & Durum</th>
      </tr>
    </thead><tbody>;
    users.forEach(user => {
      const userOrders = orders.filter(o => o.userId === user.id);
      html += <tr>
        <td>${user.id}</td>
        <td>${user.firstName} ${user.lastName}</td>
        <td>${user.phone}</td>
        <td>${user.note || "-"}</td>
        <td>${user.address}</td>
        <td>${user.bankInfo}</td>
        <td>${new Date(user.created).toLocaleString()}</td>
        <td>;
      if(userOrders.length === 0) html += "SipariÅŸ yok";
      else {
        userOrders.forEach(order => {
          html += <div style="margin-bottom:10px; border-bottom:1px solid #ccc; padding-bottom:8px;">
            <strong>${new Date(order.date).toLocaleString()}</strong><br/>;
          order.products.forEach(item => {
            const p = products.find(pr => pr.id === item.id);
            html += ${p.title} x${item.qty}<br/>;
          });
          html += Durum: <select class="status-select" data-orderid="${order.date}">
            <option value="SipariÅŸ alÄ±ndÄ±" ${order.status === "SipariÅŸ alÄ±ndÄ±" ? "selected" : ""}>SipariÅŸ alÄ±ndÄ±</option>
            <option value="HazÄ±rlanÄ±yor" ${order.status === "HazÄ±rlanÄ±yor" ? "selected" : ""}>HazÄ±rlanÄ±yor</option>
            <option value="Yola Ã§Ä±ktÄ±" ${order.status === "Yola Ã§Ä±ktÄ±" ? "selected" : ""}>Yola Ã§Ä±ktÄ±</option>
            <option value="Teslim edildi" ${order.status === "Teslim edildi" ? "selected" : ""}>Teslim edildi</option>
            <option value="Ä°ptal edildi" ${order.status === "Ä°ptal edildi" ? "selected" : ""}>Ä°ptal edildi</option>
          </select>
          </div>;
        });
      }
      html += </td></tr>;
    });
    html += "</tbody></table>";
    adminPanelDiv.innerHTML = html;
  }

  // Admin panelde sipariÅŸ durumu deÄŸiÅŸtirme
  adminPanelDiv.addEventListener("change", e => {
    if(e.target.classList.contains("status-select")) {
      const orderDate = e.target.dataset.orderid;
      const newStatus = e.target.value;
      const order = orders.find(o => o.date === orderDate);
      if(order) {
        order.status = newStatus;
        saveOrders();
        alert("SipariÅŸ durumu gÃ¼ncellendi.");
      }
    }
  });

  // Admin panel aÃ§ma butonu footerda
  const adminLoginFooter = document.querySelector(".admin-login");
  const adminPanelToggleBtn = document.createElement("button");
  adminPanelToggleBtn.textContent = "Admin Panel";
  adminPanelToggleBtn.style.marginTop = "10px";
  adminPanelToggleBtn.style.background = "#28a745";
  adminPanelToggleBtn.style.color = "white";
  adminPanelToggleBtn.style.border = "none";
  adminPanelToggleBtn.style.padding = "10px 15px";
  adminPanelToggleBtn.style.borderRadius = "6px";
  adminPanelToggleBtn.style.fontWeight = "700";
  adminPanelToggleBtn.style.cursor = "pointer";
  adminLoginFooter.appendChild(adminPanelToggleBtn);
  adminPanelToggleBtn.addEventListener("click", () => {
    if(adminLoggedIn) {
      showAdminPanel();
    } else {
      alert("Ã–nce admin giriÅŸi yapmalÄ±sÄ±nÄ±z.");
      adminLoginModal.classList.add("active");
    }
  });

  // BaÅŸlangÄ±Ã§
  showProducts();
  updateCartCount();

})();
</script>

</body>
</html>
