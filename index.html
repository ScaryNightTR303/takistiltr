<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HızlıAlış</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <header class="bg-blue-900 text-white p-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold">HızlıAlış</h1>
    <nav>
      <button onclick="girisPanelGoster()" class="mx-2 px-4 py-2 bg-blue-700 rounded hover:bg-blue-600">Giriş Yap</button>
      <button onclick="kayitPanelGoster()" class="mx-2 px-4 py-2 bg-green-700 rounded hover:bg-green-600">Kayıt Ol</button>
    </nav>
  </header>

  <main class="container mx-auto py-8">
    <section id="giris" class="max-w-md mx-auto bg-white rounded shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Giriş Yap</h2>
      <input type="text" id="girisKullanici" placeholder="Kullanıcı Adı" class="w-full mb-3 p-2 border rounded">
      <input type="password" id="girisSifre" placeholder="Şifre" class="w-full mb-3 p-2 border rounded">
      <button onclick="girisYap()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-500">Giriş Yap</button>
    </section>

    <section id="kayit" class="max-w-md mx-auto bg-white rounded shadow p-6 hidden">
      <h2 class="text-xl font-semibold mb-4">Kayıt Ol</h2>
      <input type="text" id="kayitKullanici" placeholder="Kullanıcı Adı" class="w-full mb-3 p-2 border rounded">
      <input type="password" id="kayitSifre" placeholder="Şifre" class="w-full mb-3 p-2 border rounded">
      <select id="kayitIl" onchange="ilceGetir()" class="w-full mb-3 p-2 border rounded">
        <option value="">İl Seçin</option>
      </select>
      <select id="kayitIlce" class="w-full mb-3 p-2 border rounded">
        <option value="">İlçe Seçin</option>
      </select>
      <input type="text" id="kayitAdres" placeholder="Açık Adres" class="w-full mb-3 p-2 border rounded">
      <input type="text" id="kayitPostaKodu" placeholder="Posta Kodu" class="w-full mb-3 p-2 border rounded">
      <input type="text" id="kayitTelefon" placeholder="Telefon Numarası" class="w-full mb-3 p-2 border rounded">
      <button onclick="kayitOl()" class="w-full bg-green-600 text-white p-2 rounded hover:bg-green-500">Kayıt Ol</button>
    </section>

    <section id="siparisVer" class="mt-8 max-w-md mx-auto bg-white rounded shadow p-6 hidden">
      <h2 class="text-xl font-semibold mb-4">Sipariş Ver</h2>
      <select id="urunSec" class="w-full mb-3 p-2 border rounded">
        <option value="Telefon" data-fiyat="15000">Telefon - 15000 TL</option>
        <option value="Kulaklık" data-fiyat="500">Kulaklık - 500 TL</option>
        <option value="Klavye" data-fiyat="1000">Klavye - 1000 TL</option>
      </select>
      <img id="urunGorsel" class="w-full h-40 object-contain mb-3" src="https://via.placeholder.com/300x150" alt="Ürün Görseli">
      <input type="number" id="siparisAdet" value="1" class="w-full mb-3 p-2 border rounded">
      <button onclick="siparisOlustur()" class="w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-400">Sipariş Oluştur</button>
    </section>

    <section id="kullaniciSiparisleri" class="mt-8 max-w-2xl mx-auto hidden">
      <h2 class="text-xl font-semibold mb-4">Siparişlerim</h2>
      <div id="aktifSiparisler" class="mb-6">
        <h3 class="text-lg font-semibold mb-2">Aktif Siparişler</h3>
        <div id="aktifListesi" class="space-y-2"></div>
      </div>
      <div id="gecmisSiparisler">
        <h3 class="text-lg font-semibold mb-2">Geçmiş Siparişler</h3>
        <div id="gecmisListesi" class="space-y-2"></div>
      </div>
    </section>
  </main>

  <footer class="bg-blue-900 text-white text-center p-4 mt-10">
    <p>&copy; 2025 HızlıAlış</p>
  </footer>

  <script>
    const iller = {
      'İstanbul': ['Kadıköy', 'Üsküdar', 'Beşiktaş'],
      'Ankara': ['Çankaya', 'Keçiören', 'Mamak'],
      'İzmir': ['Konak', 'Karşıyaka', 'Bornova']
    };

    window.onload = function() {
      for (const il in iller) {
        const option = document.createElement('option');
        option.value = il;
        option.textContent = il;
        document.getElementById('kayitIl').appendChild(option);
      }
    };

    function ilceGetir() {
      const il = document.getElementById('kayitIl').value;
      const ilceSelect = document.getElementById('kayitIlce');
      ilceSelect.innerHTML = '<option value="">İlçe Seçin</option>';
      if (iller[il]) {
        iller[il].forEach(ilce => {
          const option = document.createElement('option');
          option.value = ilce;
          option.textContent = ilce;
          ilceSelect.appendChild(option);
        });
      }
    }

    function girisPanelGoster() {
      document.getElementById('giris').classList.remove('hidden');
      document.getElementById('kayit').classList.add('hidden');
    }

    function kayitPanelGoster() {
      document.getElementById('kayit').classList.remove('hidden');
      document.getElementById('giris').classList.add('hidden');
    }

    let aktifKullanici = null;
    const users = JSON.parse(localStorage.getItem('users')) || {"admin":"admin1212"};
    const bakiyeler = JSON.parse(localStorage.getItem('bakiyeler')) || {"admin":0};
    const adresler = JSON.parse(localStorage.getItem('adresler')) || {"admin":""};
    const siparisler = JSON.parse(localStorage.getItem('siparisler')) || {"admin":[]};
    const siparisDurumlari = JSON.parse(localStorage.getItem('siparisDurumlari')) || {"admin":[]};

    function kayitOl() {
      const k = document.getElementById('kayitKullanici').value;
      const s = document.getElementById('kayitSifre').value;
      const il = document.getElementById('kayitIl').value;
      const ilce = document.getElementById('kayitIlce').value;
      const acikAdres = document.getElementById('kayitAdres').value;
      const postaKodu = document.getElementById('kayitPostaKodu').value;
      const telefon = document.getElementById('kayitTelefon').value;
      const tamAdres = `${il}/${ilce} - ${acikAdres} (${postaKodu}) Tel: ${telefon}`;
      if (users[k]) return alert('Kullanıcı zaten var.');
      users[k] = s;
      bakiyeler[k] = 100;
      adresler[k] = tamAdres;
      siparisler[k] = [];
      siparisDurumlari[k] = [];
      localStorage.setItem('users', JSON.stringify(users));
      localStorage.setItem('bakiyeler', JSON.stringify(bakiyeler));
      localStorage.setItem('adresler', JSON.stringify(adresler));
      localStorage.setItem('siparisler', JSON.stringify(siparisler));
      localStorage.setItem('siparisDurumlari', JSON.stringify(siparisDurumlari));
      alert('Kayıt başarılı.');
    }

    function girisYap() {
      const k = document.getElementById('girisKullanici').value;
      const s = document.getElementById('girisSifre').value;
      if (users[k] === s) {
        aktifKullanici = k;
        if (k !== 'admin') {
          document.getElementById('siparisVer').classList.remove('hidden');
          document.getElementById('kullaniciSiparisleri').classList.remove('hidden');
          gosterSiparisler();
        } else {
          alert('Admin paneli bu örnekte eklenmedi.');
        }
        alert('Giriş başarılı. Bakiye: ' + bakiyeler[k] + ' TL');
      } else {
        alert('Bilgiler yanlış.');
      }
    }

    document.getElementById('urunSec').addEventListener('change', function () {
      const secilen = this.value;
      const gorseller = {
        'Telefon': 'https://via.placeholder.com/300x150?text=Telefon',
        'Kulaklık': 'https://via.placeholder.com/300x150?text=Kulaklık',
        'Klavye': 'https://via.placeholder.com/300x150?text=Klavye'
      };
      document.getElementById('urunGorsel').src = gorseller[secilen];
    });

    function siparisOlustur() {
      const urun = document.getElementById('urunSec').value;
      const adet = parseInt(document.getElementById('siparisAdet').value);
      const fiyat = parseInt(document.getElementById('urunSec').selectedOptions[0].dataset.fiyat);
      const toplam = adet * fiyat;
      if (bakiyeler[aktifKullanici] < toplam) return alert('Yetersiz bakiye!');
      bakiyeler[aktifKullanici] -= toplam;
      siparisler[aktifKullanici].push(`${urun} x${adet} (${toplam} TL)`);
      siparisDurumlari[aktifKullanici].push('Sipariş Alındı');
      localStorage.setItem('bakiyeler', JSON.stringify(bakiyeler));
      localStorage.setItem('siparisler', JSON.stringify(siparisler));
      localStorage.setItem('siparisDurumlari', JSON.stringify(siparisDurumlari));
      gosterSiparisler();
      alert('Sipariş oluşturuldu. Kalan bakiye: ' + bakiyeler[aktifKullanici] + ' TL');
    }

    function gosterSiparisler() {
      const aktifDiv = document.getElementById('aktifListesi');
      const gecmisDiv = document.getElementById('gecmisListesi');
      aktifDiv.innerHTML = '';
      gecmisDiv.innerHTML = '';
      (siparisler[aktifKullanici] || []).forEach((s, i) => {
        const durum = siparisDurumlari[aktifKullanici][i];
        const el = document.createElement('div');
        el.className = `p-3 rounded shadow ${durum === 'Teslim Edildi' ? 'bg-green-100' : 'bg-yellow-100'}`;
        el.textContent = s + ' | Durum: ' + durum;
        if (durum === 'Teslim Edildi') {
          gecmisDiv.appendChild(el);
        } else {
          aktifDiv.appendChild(el);
        }
      });
    }
  </script>
</body>
</html>
