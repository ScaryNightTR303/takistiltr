<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HızlıAlış</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; }
    #hesapPanel { transition: transform 0.3s ease; transform: translateX(100%); }
    #hesapPanel.active { transform: translateX(0); }
    #girisPanel, #kayitPanel, #urunDetayPanel, #siparisDetayModal, #adminPanel { display: none; }
    html, body { scroll-behavior: smooth; }
    /* Scroll açık */
    body, html {
      height: 100%;
      overflow-y: auto;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-blue-900 text-white p-4 flex justify-between items-center sticky top-0 z-30 shadow">
  <h1 class="text-2xl font-bold cursor-pointer" onclick="anaSayfaGoster()">HızlıAlış</h1>
  <nav class="flex items-center gap-3">
    <button onclick="girisPanelGoster()" id="btnGiris" class="px-4 py-2 bg-blue-700 rounded hover:bg-blue-600">Giriş Yap</button>
    <button onclick="kayitPanelGoster()" id="btnKayit" class="px-4 py-2 bg-green-700 rounded hover:bg-green-600">Kayıt Ol</button>

    <button onclick="toggleHesapPanel()" id="btnHesap" class="hidden relative">
      <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Hesap" class="w-8 h-8 rounded-full" />
    </button>

    <button onclick="toggleSepetPanel()" id="btnSepet" class="hidden relative ml-3">
      <i class="fas fa-shopping-cart fa-lg"></i>
      <span id="sepetSayac" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center">0</span>
    </button>
  </nav>
</header>

<!-- GİRİŞ PANELİ -->
<section id="girisPanel" class="p-6 max-w-md mx-auto mt-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Giriş Yap</h2>
  <input id="girisKullanici" type="text" placeholder="Kullanıcı Adı" class="border p-2 mb-3 w-full rounded" />
  <input id="girisSifre" type="password" placeholder="Şifre" class="border p-2 mb-3 w-full rounded" />
  <button onclick="girisYap()" class="bg-blue-700 text-white px-4 py-2 rounded w-full">Giriş Yap</button>
  <p class="mt-4 text-center">
    Henüz hesabınız yok mu? 
    <button onclick="kayitPanelGoster()" class="text-green-600 hover:underline font-semibold">Kayıt Ol</button>
  </p>
</section>

<!-- KAYIT PANELİ -->
<section id="kayitPanel" class="p-6 max-w-md mx-auto mt-6 bg-white rounded shadow hidden">
  <h2 class="text-xl font-bold mb-4">Kayıt Ol</h2>
  <input id="kayitKullanici" type="text" placeholder="Kullanıcı Adı" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitSifre" type="password" placeholder="Şifre" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitTel" type="tel" placeholder="Telefon" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitIl" type="text" placeholder="İl" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitIlce" type="text" placeholder="İlçe" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitAdres" type="text" placeholder="Açık Adres" class="border p-2 mb-3 w-full rounded" />
  <input id="kayitPosta" type="text" placeholder="Posta Kodu" class="border p-2 mb-3 w-full rounded" />
  <button onclick="kayitOl()" class="bg-green-700 text-white px-4 py-2 rounded w-full">Kayıt Ol</button>
  <p class="mt-4 text-center">
    Zaten hesabınız var mı? 
    <button onclick="girisPanelGoster()" class="text-blue-600 hover:underline font-semibold">Giriş Yap</button>
  </p>
</section>

<!-- HESAP PANELİ -->
<aside id="hesapPanel" class="fixed top-0 right-0 w-72 h-full bg-white shadow-lg z-50 p-4 flex flex-col transform translate-x-full transition-transform duration-300">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Hesabım</h2>
    <button onclick="toggleHesapPanel()" class="text-2xl">&times;</button>
  </div>
  <div id="hesapBilgi" class="flex-1 overflow-y-auto">
    <!-- Kullanıcı bilgileri ve siparişler buraya gelecek -->
  </div>
  <button id="adminPanelBtn" onclick="adminPanelGoster()" class="hidden bg-purple-700 text-white px-4 py-2 mt-4 rounded hover:bg-purple-600">Admin Panel</button>
  <button onclick="cikisYap()" class="mt-auto bg-red-600 text-white px-4 py-2 rounded hover:bg-red-500">Çıkış Yap</button>
</aside>

<!-- SEPET PANELİ -->
<aside id="sepetPanel" class="fixed top-0 right-72 w-72 h-full bg-white shadow-lg z-50 p-4 flex flex-col transform translate-x-full transition-transform duration-300">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Sepetim</h2>
    <button onclick="toggleSepetPanel()" class="text-2xl">&times;</button>
  </div>
  <div id="sepetIcerik" class="flex-1 overflow-y-auto">
    <!-- Sepet ürünleri listelenecek -->
  </div>
  <button onclick="siparisOnayla()" class="bg-green-700 text-white px-4 py-2 mt-4 rounded hover:bg-green-600">Siparişi Onayla</button>
</aside>

<!-- ÜRÜNLER -->
<main id="urunler" class="p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto">
  <!-- JS ile ürünler yüklenecek -->
</main>

<!-- ÜRÜN DETAY PANELİ -->
<div id="urunDetayPanel" class="fixed inset-0 bg-white z-50 p-6 overflow-auto hidden">
  <button onclick="kapatDetay()" class="text-xl absolute top-4 right-6">&times;</button>
  <div class="flex flex-col md:flex-row gap-6 max-w-6xl mx-auto">
    <div class="md:w-1/2 flex flex-col gap-4">
      <img id="detayResim" src="" class="w-full object-cover rounded" />
      <div id="detayEkResimler" class="flex gap-2 overflow-x-auto"></div>
    </div>
    <div class="md:w-1/2">
      <h2 id="detayBaslik" class="text-3xl font-bold mb-4"></h2>
      <p id="detayAciklama" class="mb-4"></p>
      <p id="detayFiyat" class="text-xl font-semibold text-green-700 mb-4"></p>
      <p id="detayTarih" class="text-sm text-gray-600 mb-6"></p>
      <button onclick="urunSepeteEkle()" class="bg-blue-700 text-white px-6 py-3 rounded hover:bg-blue-600">Sepete Ekle</button>
    </div>
  </div>
</div>

<!-- SİPARİŞ DETAY MODALİ -->
<div id="siparisDetayModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded p-6 max-w-lg w-full relative">
    <button onclick="siparisDetayKapat()" class="absolute top-2 right-2 text-xl font-bold">&times;</button>
    <h3 class="text-xl font-bold mb-4">Sipariş Detayı</h3>
    <div id="siparisDetayIcerik" class="max-h-96 overflow-y-auto"></div>
  </div>
</div>

<!-- ADMIN PANELİ -->
<section id="adminPanel" class="fixed inset-0 bg-white z-50 p-6 overflow-auto hidden">
  <button onclick="adminPanelKapat()" class="text-3xl absolute top-4 right-6 font-bold">&times;</button>
  <h2 class="text-3xl font-bold mb-6">Admin Paneli</h2>

  <section>
    <h3 class="text-xl font-semibold mb-2">Kullanıcılar</h3>
    <div id="adminKullaniciListesi" class="mb-6 max-h-60 overflow-y-auto border rounded p-3 bg-gray-50"></div>
  </section>

  <section>
    <h3 class="text-xl font-semibold mb-2">Siparişler</h3>
    <div id="adminSiparisListesi" class="max-h-96 overflow-y-auto border rounded p-3 bg-gray-50"></div>
  </section>
</section>

<script>
  // Kullanıcı ve ürün verisi
  let users = {
    admin: {
      sifre: 'admin1212',
      bakiye: 0,
      siparisler: [],
      admin: true
    }
  };
  let aktifKullanici = null;

  let urunler = [];
  for (let i = 1; i <= 12; i++) {
    urunler.push({
      id: i,
      ad: `Ürün ${i}`,
      aciklama: `Bu ürün ${i} numaralı ürün açıklamasıdır. Kaliteli ve ekonomik bir üründür.`,
      fiyat: 100 + i * 10,
      tarih: '24.06.2025',
      resimler: [
        `https://picsum.photos/seed/${i}/600/400`,
        `https://picsum.photos/seed/${i}a/600/400`,
        `https://picsum.photos/seed/${i}b/600/400`
      ]
    });
  }

  // Sepet içeriği
  let sepet = [];

  // Panel görünürlük fonksiyonları
  function girisPanelGoster() {
    document.getElementById('girisPanel').style.display = 'block';
    document.getElementById('kayitPanel').style.display = 'none';
  }
  function kayitPanelGoster() {
    document.getElementById('kayitPanel').style.display = 'block';
    document.getElementById('girisPanel').style.display = 'none';
  }
  function toggleHesapPanel() {
    const panel = document.getElementById('hesapPanel');
    if (!aktifKullanici) return alert('Önce giriş yapınız.');
    panel.classList.toggle('active');
    if (panel.classList.contains('active')) hesapBilgileriniYukle();
  }
  function toggleSepetPanel() {
    const panel = document.getElementById('sepetPanel');
    if (!aktifKullanici) return alert('Önce giriş yapınız.');
    panel.classList.toggle('active');
    if (panel.classList.contains('active')) sepetiYukle();
  }
  function adminPanelGoster() {
    if (!aktifKullanici || !users[aktifKullanici].admin) {
      alert('Yetkiniz yok.');
      return;
    }
    document.getElementById('adminPanel').style.display = 'block';
    adminKullanicilariYukle();
    adminSiparisleriYukle();
  }
  function adminPanelKapat() {
    document.getElementById('adminPanel').style.display = 'none';
  }
  function anaSayfaGoster() {
    document.getElementById('urunler').style.display = 'grid';
    document.getElementById('girisPanel').style.display = 'none';
    document.getElementById('kayitPanel').style.display = 'none';
    if (aktifKullanici) {
      document.getElementById('btnGiris').classList.add('hidden');
      document.getElementById('btnKayit').classList.add('hidden');
      document.getElementById('btnHesap').classList.remove('hidden');
      document.getElementById('btnSepet').classList.remove('hidden');
    } else {
      document.getElementById('btnGiris').classList.remove('hidden');
      document.getElementById('btnKayit').classList.remove('hidden');
      document.getElementById('btnHesap').classList.add('hidden');
      document.getElementById('btnSepet').classList.add('hidden');
    }
  }

  // Kullanıcı işlemleri
  function girisYap() {
    const k = document.getElementById('girisKullanici').value.trim();
    const s = document.getElementById('girisSifre').value;
    if (users[k] && users[k].sifre === s) {
      aktifKullanici = k;
      alert(`${k} olarak giriş yapıldı.`);
      document.getElementById('girisKullanici').value = '';
      document.getElementById('girisSifre').value = '';
      anaSayfaGoster();
    } else {
      alert('Kullanıcı adı veya şifre hatalı.');
    }
  }
  function kayitOl() {
    const k = document.getElementById('kayitKullanici').value.trim();
    const s = document.getElementById('kayitSifre').value;
    const tel = document.getElementById('kayitTel').value.trim();
    const il = document.getElementById('kayitIl').value.trim();
    const ilce = document.getElementById('kayitIlce').value.trim();
    const adres = document.getElementById('kayitAdres').value.trim();
    const posta = document.getElementById('kayitPosta').value.trim();

    if (!k || !s || !tel || !il || !ilce || !adres || !posta) {
      alert('Lütfen tüm alanları doldurun.');
      return;
    }
    if (users[k]) {
      alert('Bu kullanıcı adı zaten kayıtlı.');
      return;
    }
    users[k] = {
      sifre: s,
      telefon: tel,
      il: il,
      ilce: ilce,
      adres: adres,
      posta: posta,
      bakiye: 0,
      siparisler: [],
      admin: false
    };
    alert('Kayıt başarılı. Giriş yapabilirsiniz.');
    kayitPanelGizle();
    girisPanelGoster();
  }
  function cikisYap() {
    aktifKullanici = null;
    alert('Çıkış yapıldı.');
    document.getElementById('btnGiris').classList.remove('hidden');
    document.getElementById('btnKayit').classList.remove('hidden');
    document.getElementById('btnHesap').classList.add('hidden');
    document.getElementById('btnSepet').classList.add('hidden');
    document.getElementById('urunler').style.display = 'none';
    document.getElementById('hesapPanel').classList.remove('active');
    document.getElementById('sepetPanel').classList.remove('active');
    document.getElementById('adminPanel').style.display = 'none';
    girisPanelGoster();
  }

  // Panelleri göster/gizle
  function girisPanelGoster() {
    document.getElementById('girisPanel').style.display = 'block';
    document.getElementById('kayitPanel').style.display = 'none';
    document.getElementById('urunler').style.display = 'none';
  }
  function kayitPanelGoster() {
    document.getElementById('kayitPanel').style.display = 'block';
    document.getElementById('girisPanel').style.display = 'none';
    document.getElementById('urunler').style.display = 'none';
  }
  function kayitPanelGizle() {
    document.getElementById('kayitPanel').style.display = 'none';
  }

  // Ürünleri yükle ve göster
  function urunleriYukle() {
    const container = document.getElementById('urunler');
    container.innerHTML = '';
    urunler.forEach(u => {
      let div = document.createElement('div');
      div.className = "bg-white shadow rounded overflow-hidden cursor-pointer hover:shadow-lg transition";
      div.onclick = () => urunDetayGoster(u.id);
      div.innerHTML = `
        <img src="${u.resimler[0]}" alt="${u.ad}" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="text-lg font-bold">${u.ad}</h3>
          <p class="text-sm text-gray-600 line-clamp-2">${u.aciklama}</p>
          <p class="text-green-600 font-semibold mt-2">${u.fiyat} TL</p>
        </div>
      `;
      container.appendChild(div);
    });
  }

  // Ürün detay göster
  function urunDetayGoster(id) {
    const urun = urunler.find(u => u.id === id);
    if (!urun) return;
    document.getElementById('urunDetayPanel').style.display = 'block';
    document.getElementById('detayResim').src = urun.resimler[0];
    document.getElementById('detayBaslik').textContent = urun.ad;
    document.getElementById('detayAciklama').textContent = urun.aciklama;
    document.getElementById('detayFiyat').textContent = urun.fiyat + " TL";
    document.getElementById('detayTarih').textContent = `Yüklenme Tarihi: ${urun.tarih}`;

    // Ek resimler
    const ekResimlerDiv = document.getElementById('detayEkResimler');
    ekResimlerDiv.innerHTML = '';
    urun.resimler.forEach(resim => {
      const img = document.createElement('img');
      img.src = resim;
      img.className = 'w-24 h-24 object-cover rounded cursor-pointer hover:ring-2 ring-blue-500';
      img.onclick = () => {
        document.getElementById('detayResim').src = resim;
      };
      ekResimlerDiv.appendChild(img);
    });

    aktifUrunId = id;
  }

  function kapatDetay() {
    document.getElementById('urunDetayPanel').style.display = 'none';
  }

  // Sepete ekle
  let aktifUrunId = null;
  function urunSepeteEkle() {
    if (!aktifUrunId) return alert('Ürün seçili değil.');
    const urun = urunler.find(u => u.id === aktifUrunId);
    if (!urun) return;
    // Sepette aynı ürün var mı kontrol
    let sepetteki = sepet.find(s => s.id === urun.id);
    if (sepetteki) {
      sepetteki.adet++;
    } else {
      sepet.push({ id: urun.id, ad: urun.ad, fiyat: urun.fiyat, adet: 1 });
    }
    alert(`${urun.ad} sepete eklendi.`);
    sepetSayisiniGuncelle();
  }

  // Sepet paneli
  function sepetiYukle() {
    const sepetDiv = document.getElementById('sepetIcerik');
    sepetDiv.innerHTML = '';
    if (sepet.length === 0) {
      sepetDiv.innerHTML = '<p class="text-center text-gray-500 mt-4">Sepetiniz boş.</p>';
      return;
    }
    sepet.forEach(item => {
      let div = document.createElement('div');
      div.className = 'flex justify-between items-center border-b py-2';
      div.innerHTML = `
        <div>
          <p class="font-semibold">${item.ad}</p>
          <p>Adet: ${item.adet}</p>
          <p>Fiyat: ${item.fiyat} TL</p>
        </div>
        <button onclick="sepetteUrunSil(${item.id})" class="text-red-600 hover:text-red-800 font-bold">×</button>
      `;
      sepetDiv.appendChild(div);
    });
  }

  function sepetteUrunSil(id) {
    sepet = sepet.filter(item => item.id !== id);
    sepetiYukle();
    sepetSayisiniGuncelle();
  }

  // Sepet sayısı güncelle
  function sepetSayisiniGuncelle() {
    document.getElementById('sepetSayac').textContent = sepet.reduce((a,b) => a + b.adet, 0);
  }

  // Sipariş onayla
  function siparisOnayla() {
    if (sepet.length === 0) return alert('Sepetiniz boş.');
    const kullanici = users[aktifKullanici];
    if (!kullanici.siparisler) kullanici.siparisler = [];
    // Siparişi ekle
    const yeniSiparis = {
      id: Date.now(),
      tarih: new Date().toLocaleString(),
      urunler: JSON.parse(JSON.stringify(sepet)),
      toplam: sepet.reduce((a,b) => a + b.fiyat * b.adet, 0)
    };
    kullanici.siparisler.push(yeniSiparis);
    sepet = [];
    sepetiYukle();
    sepetSayisiniGuncelle();
    alert('Siparişiniz alındı.');
  }

  // Hesap bilgileri ve siparişler
  function hesapBilgileriniYukle() {
    const hesapDiv = document.getElementById('hesapBilgi');
    const kullanici = users[aktifKullanici];
    if (!kullanici) return;
    hesapDiv.innerHTML = `
      <p><strong>Kullanıcı:</strong> ${aktifKullanici}</p>
      <p><strong>Telefon:</strong> ${kullanici.telefon || '-'}</p>
      <p><strong>Adres:</strong> ${kullanici.il || '-'} / ${kullanici.ilce || '-'}, ${kullanici.adres || '-'}</p>
      <p><strong>Posta Kodu:</strong> ${kullanici.posta || '-'}</p>
      <h3 class="mt-4 font-semibold text-lg">Siparişleriniz</h3>
      <div id="siparislerListesi" class="max-h-48 overflow-y-auto mt-2">
        ${kullanici.siparisler && kullanici.siparisler.length > 0
          ? kullanici.siparisler.map(sip => 
              `<div class="border p-2 mb-2 cursor-pointer hover:bg-gray-100" onclick="siparisDetayGoster(${sip.id})">
                <p><strong>Tarih:</strong> ${sip.tarih}</p>
                <p><strong>Toplam:</strong> ${sip.toplam.toFixed(2)} TL</p>
              </div>`
            ).join('')
          : '<p>Henüz siparişiniz yok.</p>'}
      </div>
    `;
  }

  // Sipariş detay göster
  function siparisDetayGoster(id) {
    const kullanici = users[aktifKullanici];
    if (!kullanici || !kullanici.siparisler) return;
    const siparis = kullanici.siparisler.find(s => s.id === id);
    if (!siparis) return;

    const detayDiv = document.getElementById('siparisDetayIcerik');
    detayDiv.innerHTML = `
      <p><strong>Sipariş Tarihi:</strong> ${siparis.tarih}</p>
      <p><strong>Toplam:</strong> ${siparis.toplam.toFixed(2)} TL</p>
      <h4 class="font-semibold mt-4 mb-2">Ürünler:</h4>
      <ul class="list-disc list-inside">
        ${siparis.urunler.map(u => `<li>${u.ad} - ${u.adet} adet - ${u.fiyat} TL</li>`).join('')}
      </ul>
    `;

    document.getElementById('siparisDetayModal').style.display = 'flex';
  }
  function siparisDetayKapat() {
    document.getElementById('siparisDetayModal').style.display = 'none';
  }

  // Admin panel yükleme
  function adminKullanicilariYukle() {
    const div = document.getElementById('adminKullaniciListesi');
    div.innerHTML = '';
    Object.entries(users).forEach(([kadi, data]) => {
      let kullaniciDiv = document.createElement('div');
      kullaniciDiv.className = 'border p-2 mb-2 rounded bg-white flex justify-between items-center';
      kullaniciDiv.innerHTML = `
        <div>
          <p><strong>${kadi}</strong> ${data.admin ? '(Admin)' : ''}</p>
          <p>Bakiye: ${data.bakiye.toFixed(2)} TL</p>
        </div>
        <div>
          <button onclick="bakiyeArttir('${kadi}')" class="bg-green-600 text-white px-2 py-1 rounded mr-2 hover:bg-green-500">+</button>
          <button onclick="bakiyeAzalt('${kadi}')" class="bg-red-600 text-white px-2 py-1 rounded hover:bg-red-500">-</button>
        </div>
      `;
      div.appendChild(kullaniciDiv);
    });
  }
  function bakiyeArttir(kadi) {
    users[kadi].bakiye += 10;
    adminKullanicilariYukle();
  }
  function bakiyeAzalt(kadi) {
    if(users[kadi].bakiye >= 10) {
      users[kadi].bakiye -= 10;
      adminKullanicilariYukle();
    } else {
      alert('Bakiye 0\'ın altına inemez.');
    }
  }

  function adminSiparisleriYukle() {
    const div = document.getElementById('adminSiparisListesi');
    div.innerHTML = '';
    Object.entries(users).forEach(([kadi, data]) => {
      if (!data.siparisler || data.siparisler.length === 0) return;
      data.siparisler.forEach(sip => {
        let sipDiv = document.createElement('div');
        sipDiv.className = 'border p-2 mb-2 rounded bg-white';
        sipDiv.innerHTML = `
          <p><strong>Kullanıcı:</strong> ${kadi}</p>
          <p><strong>Sipariş Tarihi:</strong> ${sip.tarih}</p>
          <p><strong>Toplam:</strong> ${sip.toplam.toFixed(2)} TL</p>
          <button onclick="siparisIptal('${kadi}', ${sip.id})" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-500 mt-2">Siparişi İptal Et</button>
        `;
        div.appendChild(sipDiv);
      });
    });
  }
  function siparisIptal(kadi, siparisId) {
    if(confirm('Siparişi iptal etmek istediğinize emin misiniz?')) {
      users[kadi].siparisler = users[kadi].siparisler.filter(s => s.id !== siparisId);
      adminSiparisleriYukle();
      if (kadi === aktifKullanici) hesapBilgileriniYukle();
      alert('Sipariş iptal edildi.');
    }
  }

  // Başlangıçta
  girisPanelGoster();
  urunleriYukle();
  sepetSayisiniGuncelle();

</script>

</body>
</html>
