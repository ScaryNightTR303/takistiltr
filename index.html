<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HızlıAlış</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style> body { font-family: 'Poppins', sans-serif; } </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="bg-blue-900 text-white p-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold">HızlıAlış</h1>
    <nav id="topNav">
      <button onclick="girisPanelGoster()" id="btnGiris" class="mx-2 px-4 py-2 bg-blue-700 rounded hover:bg-blue-600">Giriş Yap</button>
      <button onclick="kayitPanelGoster()" id="btnKayit" class="mx-2 px-4 py-2 bg-green-700 rounded hover:bg-green-600">Kayıt Ol</button>
      <button onclick="cikisYap()" id="btnCikis" class="mx-2 px-4 py-2 bg-red-600 rounded hover:bg-red-500 hidden">Çıkış Yap</button>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="container mx-auto py-8 flex-1">
    
    <!-- GİRİŞ -->
    <section id="giris" class="max-w-md mx-auto bg-white rounded shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Giriş Yap</h2>
      <input type="text" id="girisKullanici" placeholder="Kullanıcı Adı" class="w-full mb-3 p-2 border rounded">
      <input type="password" id="girisSifre" placeholder="Şifre" class="w-full mb-3 p-2 border rounded">
      <button onclick="girisYap()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-500">Giriş Yap</button>
    </section>

    <!-- KAYIT -->
    <section id="kayit" class="max-w-md mx-auto bg-white rounded shadow p-6 hidden">
      <h2 class="text-xl font-semibold mb-4">Kayıt Ol</h2>
      <input type="text" id="kayitKullanici" placeholder="Kullanıcı Adı" class="w-full mb-3 p-2 border rounded">
      <input type="password" id="kayitSifre" placeholder="Şifre" class="w-full mb-3 p-2 border rounded">
      <select id="kayitIl" onchange="ilceGetir()" class="w-full mb-3 p-2 border rounded">
        <option value="">İl Seçin</option>
      </select>
      <select id="kayitIlce" class="w-full mb-3 p-2 border rounded">
        <option value="">İlçe Seçin</option>
      </select>
      <input type="text" id="kayitAdres" placeholder="Açık Adres" class="w-full mb-3 p-2 border rounded">
      <input type="text" id="kayitPostaKodu" placeholder="Posta Kodu" class="w-full mb-3 p-2 border rounded">
      <input type="text" id="kayitTelefon" placeholder="Telefon Numarası" class="w-full mb-3 p-2 border rounded">
      <button onclick="kayitOl()" class="w-full bg-green-600 text-white p-2 rounded hover:bg-green-500">Kayıt Ol</button>
    </section>

    <!-- ÜRÜN LİSTELEME -->
    <section id="urunler" class="mt-8 grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      <!-- JavaScript ile doldurulacak -->
    </section>

    <!-- SIPARİŞ PANELİ -->
    <section id="siparisPanel" class="mt-8 max-w-md mx-auto bg-white rounded shadow p-6 hidden">
      <h2 class="text-xl font-semibold mb-4">Sipariş Detayı</h2>
      <p id="seciliUrunAdi" class="font-medium"></p>
      <img id="seciliUrunImg" class="w-full h-40 object-contain mb-4" src="" alt="Ürün">
      <input type="number" id="sipAdet" min="1" value="1" class="w-full mb-3 p-2 border rounded">
      <button onclick="siparisOlustur()" class="w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-400">Sipariş Oluştur</button>
    </section>

    <!-- SİPARİŞLER -->
    <section id="siparislerim" class="mt-8 max-w-2xl mx-auto hidden">
      <h2 class="text-xl font-semibold mb-4">Siparişlerim</h2>
      <div id="aktifListesi" class="space-y-2 mb-6"></div>
      <div id="gecmisListesi" class="space-y-2"></div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="bg-blue-900 text-white text-center p-4">
    <p>&copy; 2025 HızlıAlış</p>
  </footer>


<script>
  const iller = {
    'İstanbul':['Kadıköy','Üsküdar','Beşiktaş'],
    'Ankara':['Çankaya','Keçiören','Mamak'],
    'İzmir':['Konak','Karşıyaka','Bornova']
  };
  window.onload = () => {
    for (let il in iller) {
      let o = document.createElement('option');
      o.value = il; o.textContent = il;
      document.getElementById('kayitIl').appendChild(o);
    }
    loadUrunler();
  };

  // Menü kontrol
  function girisPanelGoster(){
    document.getElementById('giris').classList.remove('hidden');
    document.getElementById('kayit').classList.add('hidden');
  }
  function kayitPanelGoster(){
    document.getElementById('kayit').classList.remove('hidden');
    document.getElementById('giris').classList.add('hidden');
  }
  function cikisYap(){
    location.reload();
  }

  function ilceGetir(){
    let il = document.getElementById('kayitIl').value;
    let ilce = document.getElementById('kayitIlce');
    ilce.innerHTML = '<option value="">İlçe Seçin</option>';
    iller[il]?.forEach(i=>{
      let o = document.createElement('option');
      o.value=i; o.textContent=i;
      ilce.appendChild(o);
    });
  }

  let aktifKullanici = null;
  const users = JSON.parse(localStorage.getItem('users'))||{'admin':'admin1212'};
  const bakiyeler = JSON.parse(localStorage.getItem('bakiyeler'))||{'admin':0};
  const adresler = JSON.parse(localStorage.getItem('adresler'))||{'admin':''};
  const siparisler = JSON.parse(localStorage.getItem('siparisler'))||{'admin':[]};
  const siparisDurumlari = JSON.parse(localStorage.getItem('siparisDurumlari'))||{'admin':[]};

  // Ürün listesi
  const urunList = [
    {id:1, name:'Akıllı Telefon', price:12000, img:'https://source.unsplash.com/400x300/?smartphone'},
    {id:2, name:'Kablosuz Kulaklık', price:750, img:'https://source.unsplash.com/400x300/?headphones'},
    {id:3, name:'Mekanik Klavye', price:1300, img:'https://source.unsplash.com/400x300/?keyboard'},
    {id:4, name:'Gaming Mouse', price:700, img:'https://source.unsplash.com/400x300/?mouse'},
    {id:5, name:'24\" Monitör', price:4500, img:'https://source.unsplash.com/400x300/?monitor'},
    {id:6, name:'USB Bellek 64GB', price:200, img:'https://source.unsplash.com/400x300/?usb'},
    {id:7, name:'Powerbank 10000mAh', price:850, img:'https://source.unsplash.com/400x300/?powerbank'},
    {id:8, name:'Web Kamera HD', price:1250, img:'https://source.unsplash.com/400x300/?webcam'},
    {id:9, name:'Bluetooth Hoparlör', price:950, img:'https://source.unsplash.com/400x300/?speaker'},
    {id:10, name:'Tablet', price:9500, img:'https://source.unsplash.com/400x300/?tablet'}
  ];

  function loadUrunler(){
    let cont = document.getElementById('urunler');
    urunList.forEach(u=>{
      let card = document.createElement('div');
      card.className = 'bg-white rounded shadow hover:shadow-lg transition p-4 flex flex-col';
      card.innerHTML = `
        <img src="${u.img}" alt="${u.name}" class="w-full h-48 object-cover mb-3 rounded">
        <h3 class="font-semibold mb-2">${u.name}</h3>
        <p class="text-blue-600 font-bold mb-4">${u.price.toLocaleString()} TL</p>
        <button onclick="urunSecildi(${u.id})" class="mt-auto bg-yellow-500 text-white py-2 rounded hover:bg-yellow-400">Detaya Git</button>
      `;
      cont.appendChild(card);
    });
  }

  function urunSecildi(id){
    let u = urunList.find(x=>x.id===id);
    document.getElementById('seciliUrunAdi').textContent = u.name + ' - ' + u.price.toLocaleString() + ' TL';
    document.getElementById('seciliUrunImg').src = u.img;
    document.getElementById('sipAdet').value = 1;
    document.getElementById('siparisPanel').classList.remove('hidden');
    document.getElementById('siparislerim').classList.add('hidden');
  }

  function kayitOl(){
    let k = document.getElementById('kayitKullanici').value.trim();
    if(users[k]) return alert('Kullanıcı adı var.');
    users[k] = document.getElementById('kayitSifre').value;
    bakiyeler[k]=0; adresler[k]=`${document.getElementById('kayitIl').value}/${document.getElementById('kayitIlce').value} ${document.getElementById('kayitAdres').value}`;
    siparisler[k]=[]; siparisDurumlari[k]=[];
    localStorage.setItem('users',JSON.stringify(users));
    localStorage.setItem('bakiyeler',JSON.stringify(bakiyeler));
    localStorage.setItem('adresler',JSON.stringify(adresler));
    localStorage.setItem('siparisler',JSON.stringify(siparisler));
    localStorage.setItem('siparisDurumlari',JSON.stringify(siparisDurumlari));
    alert('Kayıt başarılı!');
    girisPanelGoster();
  }

  function girisYap(){
    let k = document.getElementById('girisKullanici').value.trim(), s = document.getElementById('girisSifre').value;
    if(users[k]===s){
      aktifKullanici=k;
      document.getElementById('btnGiris').classList.add('hidden');
      document.getElementById('btnKayit').classList.add('hidden');
      document.getElementById('btnCikis').classList.remove('hidden');
      document.getElementById('urunler').classList.remove('hidden');
    }else alert('Hatalı bilgi');
  }

  function siparisOlustur(){
    let adet = parseInt(document.getElementById('sipAdet').value) || 1;
    let [isim, fiyatTxt] = document.getElementById('seciliUrunAdi').textContent.split(' - ');
    let fiyat = parseInt(fiyatTxt.replace(/\D/g,''));
    let toplam = fiyat * adet;
    if(bakiyeler[aktifKullanici] < toplam) return alert('Yetersiz bakiye!');
    bakiyeler[aktifKullanici] -= toplam;
    siparisler[aktifKullanici].push(`${isim} x${adet} (${toplam} TL)`);
    siparisDurumlari[aktifKullanici].push('Sipariş Alındı');
    localStorage.setItem('bakiyeler',JSON.stringify(bakiyeler));
    localStorage.setItem('siparisler',JSON.stringify(siparisler));
    localStorage.setItem('siparisDurumlari',JSON.stringify(siparisDurumlari));
    alert('Sipariş aldım ☑️');
    document.getElementById('siparisPanel').classList.add('hidden');
    gosterSiparisler();
  }

  function gosterSiparisler(){
    document.getElementById('siparislerim').classList.remove('hidden');
    let aktif = document.getElementById('aktifListesi'), gcm = document.getElementById('gecmisListesi');
    aktif.innerHTML=''; gcm.innerHTML='';
    siparisler[aktifKullanici].forEach((s,i)=>{
      let el=document.createElement('div');
      el.className='p-3 rounded shadow '+(siparisDurumlari[aktifKullanici][i]==='Teslim Edildi'?'bg-green-100':'bg-yellow-100');
      el.textContent=s+' | Durum: '+siparisDurumlari[aktifKullanici][i];
      (siparisDurumlari[aktifKullanici][i]==='Teslim Edildi'?gcm:aktif).appendChild(el);
    });
  }
</script>
</body>
</html>
